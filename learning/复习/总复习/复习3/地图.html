<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script
      type="text/javascript"
      src="https://webapi.amap.com/maps?v=1.4.15&key=f758f8e90a38bcb7b8be511bd5325934&plugin=AMap.ToolBar,AMap.Scale,AMap.OverView,AMap.MapType,AMap.PlaceSearch,AMap.Autocomplete,AMap.Driving,AMap.TruckDriving,AMap.Transfer,AMap.Walking,AMap.Riding,AMap.ControlBar"
    ></script>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #container {
        width: 100%;
        height: 100%;
        position: absolute;
      }
      #box {
        width: 200px;
        left: 50%;
        top: 10px;
        position: absolute;
        background-color: #fff;
        box-shadow: 0 0 10px #0005;
        /* text-overflow: ellipsis;
        overflow: hidden; */
      }
      #text {
        width: 150px;
        height: 20px;
      }
      #panel {
        position: absolute;
        left: 0;
        top: 10px;
        width: 300px;
        box-shadow: 0 0 10px #0002;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="box">
      <input type="" id="text" />
      <input type="button" id="btn" value="搜索" />
    </div>
    <div id="panel"></div>
    <script>
      var map = new AMap.Map('container', {
        zoom: 10,
        center: [102.71791582792997, 25.06913573857768],
        viewMode: '3D', //变成了3d 地图了
        buildingAnimation: true, // 可以让显示的建筑物变成动画现实
        resizeEnable: true
      });
      /*
      设置
      级别
      中心点
      行政区
      显示范围
      限制(取消)显示范围
      平移,移到
      鼠标样式


      */
      // map.setZoom(17);

      // map.setCenter([102.71791582792997, 25.06913573857768]);

      // map.setZoomAndCenter(15, [102.71791582792997, 25.06913573857768]);

      // map.setCity('北京');

      // map.setBounds(new AMap.Bounds([99.71791582792997, 25.06913573857768],[199.71791582792997, 25.06913573857768]))
      // var a = map.setLimitBounds(
      //   new AMap.Bounds(
      //     [101.71791582792997, 25.06913573857768],
      //     [102.71791582792997, 25.06913573857768]
      //   )
      // );
      // map.clearLimitBounds(a);

      // map.panBy(1000,1000)
      // map.panTo([0,100])

      // map.setDefaultCursor('copy')

      // 获取方法
      // box.innerHTML = map.getCenter();
      // box.innerHTML = map.getZoom();
      // map.getCity(function(info) {
      //   box.innerHTML = info.city;
      // });

      /*
      地图功能
      控件加载url&plugin=AMap.Riding
      自动完成
      自定义标记
      3d
      路线指定 车,人,自行车,货车,公交车
      比例尺
      地图类型
      鹰眼插件

      */
      var text = document.querySelector('#text');
      var box = document.querySelector('#box');
      var panel = document.querySelector('#panel');

      var fun = {
        auto: new AMap.Autocomplete({ input: text }),
        place: new AMap.PlaceSearch({
          pagesize: 5,
          pageIndex: 1,
          map: map,
          panel: panel
        }),
        _3d: new AMap.ControlBar({
          showZoomBar: true, // 显示 zoom条控件
          // showControlButton:true,// 可以取消 倾斜旋转角度的按钮
          position: {
            //控件的定位
            right: '50px',
            top: '30px'
          }
        }),
        maker: new AMap.Marker({
          icon:
            'https://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png', //标记的图标
          position: [101.71791582792997, 25.06913573857768], //标记的坐标
          offset: new AMap.Pixel(-25, -25) // 像素的偏差值
        }),
        scale: new AMap.Scale(),
        toolbar: new AMap.ToolBar(),
        overView: new AMap.OverView(),
        drive: new AMap.Driving({ map: map, panel: panel }),
        walk: new AMap.Walking({ map: map, panel: panel }),
        // trunk: new AMap.TrunkDriving({
        //   map: map,
        //   panel: panel,
        //   city: '昆明',
        //   size: 1
        // }),
        ride: new AMap.Riding({ map: map, panel: panel }),
        bus: new AMap.Transfer({ map: map, panel: panel }),
        mapType: new AMap.MapType({ defaultType: 0, showload: true })
      };
      // 点击查询结果跳转
      // AMap.event.addListener(fun.auto, 'select', function(e) {
      //   fun.place.search(e.poi.name);
      // });

      // 路线点击跳转
      // var arr = [],
      //   index = 0;
      // map.on('click', function(e) {
      //   index++;
      //   if (index % 2 == 1) {
      //     arr = [e.lnglat.Q, e.lnglat.P];
      //   } else {
      //     fun.bus.search(
      //       new AMap.LngLat(arr[0], arr[1]),
      //       new AMap.LngLat(e.lnglat.Q, e.lnglat.P),
      //       function() {}
      //     );
      //   }
      //   console.log(e);
      // });

      // 插件的加载 比例尺,缩略图 3d
      map.addControl(fun.scale);
      map.addControl(fun.toolbar);
      map.addControl(fun.overView);
      map.addControl(fun._3d);

      map.add([fun.maker]);

      // 地图内部状态改变

      map.on('complete', function() {
        console.log('1');
      });
      map.on('zoomstart', function() {
        console.log('2');
      });
      map.on('zoomend', function() {
        console.log('3');
      });
      map.on('mapmove', function() {
        console.log('4');
      });
      map.on('movestart', function() {
        console.log('5');
      });
      map.on('movesend', function() {
        console.log('6');
      });
      map.on('resize', function() {
        console.log('7');
      });

      // 覆盖物状态改变

      var text1 = new AMap.Text({
        text: '不晓得啊',
        position: [102.71791582792997, 25.06913573857768]
      });
      var circle = new AMap.Circle({
        center: [102.71791582792997, 25.06913573857768],
        radius: 30000
      });

      circle.on('mouseover', function() {
        circle.hide();
      });
      circle.on('mouseout', function() {
        circle.show();
      });

      var context = new AMap.ContextMenu();
      context.addItem('不知道', function() {
        map.zoomIn();
      });
      context.addItem('知道', function() {
        map.zoomOut();
      });
      // 右键的地方添加
      map.on('rightclick', function(e) {
        context.open(map, e.lnglat);
      });
      map.add([text1, circle]);
    </script>
  </body>
</html>
